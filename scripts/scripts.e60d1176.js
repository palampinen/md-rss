"use strict";angular.module("materialogApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngStorage","ngMaterial"]).config(["$locationProvider","$routeProvider","$mdThemingProvider",function(a,b,c){b.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"}),c.theme("default").primaryColor("pink").accentColor("indigo")}]),angular.module("materialogApp").controller("MainCtrl",["$rootScope","$scope","$timeout","$localStorage","Blog",function(a,b,c,d,e){b.current=d.currentBlog&&parseInt(d.currentBlog)?d.currentBlog:0,b.url=d.blogs&&d.blogs.length&&d.blogs[b.current].url?d.blogs[b.current].url:"",b.$watch(function(){return a.url},function(a){b.url=a}),b.clear=function(){b.url=""};var f;b.$watch("url",function(a){a&&(b.loading=!0),c.cancel(f),f=c(function(){h(a)},2e3)}),b.loading=!1;var g=function(a){return a?(a.indexOf("http")<0&&(a="http://"+a),a.indexOf(".")<0?!1:a):!1},h=function(a){return b.loading=!0,(a=g(a))?void e.findFeed(a,function(b){var c=b.data.responseData.feed.feedUrl;d.blogs||(d.blogs=[]);var f=_.find(d.blogs,function(a){return a.url==c});f||d.blogs.push({url:c,link:b.data.responseData.feed.link,title:b.data.responseData.feed.title}),e.parseFeed(c,30).then(function(b){i(b,a)})}):(b.status=!1,void(b.loading=!1))},i=function(a){return console.log(a),b.status=200==a.data.responseStatus,b.loading=!1,a.data&&a.data.responseData&&a.data.responseData.feed?(b.feed=a.data.responseData.feed,void b.feed.entries.map(function(a){return a.publishedDate=moment(a.publishedDate).format("DD.MM.YYYY HH:mm")})):void(b.feed={})}}]),angular.module("materialogApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("materialogApp").factory("Blog",["$http",function(a){return{findFeed:function(b,c){for(var d=["","feed","rss"],e=!1,f="",g=0;d.length>g&&!e;)f="/"==b.charAt(b.length-1)?b+d[g++]:b+"/"+d[g++],b.indexOf("/"+d[g])<0&&a.jsonp("//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=0&callback=JSON_CALLBACK&q="+encodeURIComponent(f)).then(function(a){200!=a.data.responseStatus||e||(e=!0,c(a))})},parseFeed:function(b,c){return a.jsonp("//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+c+"&callback=JSON_CALLBACK&q="+encodeURIComponent(b))}}}]),angular.module("materialogApp").controller("MenuCtrl",["$rootScope","$scope","$localStorage","$mdSidenav",function(a,b,c,d){b.blogs=c.blogs||[],console.log(b.blogs),b.blogFunctions={add:function(){d("left").close().then(function(){document.getElementById("addBlog").getElementsByTagName("input")[0].focus()})},select:function(b){c.currentBlog=b,a.url=c.blogs[b].url},remove:function(a){c.blogs.splice(a,1)}},b.close=function(){},b.active=function(b){return console.log(b),a.url==b}}]),angular.module("materialogApp").controller("AppCtrl",["$scope","$timeout","$mdSidenav","$log",function(a,b,c,d){a.toggleLeft=function(){c("left").toggle().then(function(){d.debug("toggle left is done")})}}]);